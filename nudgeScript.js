function namehints(a){show("txtHint");el("txtHint").innerHTML=loading;el("txtHint").innerHTML=responsetext("str="+a,"namehints.php")}function addname(a,b){el("txt1").value=" ";hide("userinfo");hide("txtHint");el("txtHint").innerHTML=" ";var c=document.forms.nudgeform.elements.userlist.value,d=c.split(" "),e=false;for(i=0;i<d.length;i++){if(d[i]==a){e=true;break}}if(!e){document.forms.nudgeform.elements.userlist.value=c+" "+a;var f='("'+b+'","'+a+'")';el("nudgenames").innerHTML=el("nudgenames").innerHTML+"<span id='id"+a+"' onmouseover='mover"+f+"' onmouseout='mout"+f+"' onclick='mclick"+f+"'><b>,"+b+"</b></span>";el("id"+a).innerHTML=",<b>"+b+"</b>"}if(el("known").innerHTML==""&&e==false){el("known").innerHTML='</br><input  type="checkbox" name="known" value="yes">Let recipients know who else you included';$("#known").hide();$("#known").show("slow")}var d=document.forms.nudgeform.elements.userlist.value.split(" ");if(el("known").innerHTML!=""&&d.length<2){$("#known").hide("slow")}}function mover(a,b){el("id"+b).style.background="grey";if(el("id"+b).lastChild.nodeName!="SPAN"){var c=document.createElement("span"),d="('"+a+"','"+b+"')",e="'none'";c.innerHTML='<a href="javascript:void(0)" onmouseover="this.style.background='+e+';"><span style="position:relative;top:-3px;margin-left:4px;font-weight:bold;color:red;" title="Exclude '+a+'" onclick="deleteentry'+d+'">&#215;</span></a> ';el("id"+b).appendChild(c)}}function mclick(a,b){el("id"+b).style.background="none";if(el("id"+b).lastChild.nodeName=="SPAN"){el("id"+b).removeChild(el("id"+b).lastChild)}}function checked(){var a=document.nudgeform.elements.list,b=false;for(var c=0;c<a.length;c++){if(a[c].checked==true){b=true;break}}if(b==false)return false;else return true}function deleteentry(a,b){el("nudgenames").removeChild(el("id"+b));var c=document.forms.nudgeform.elements.userlist.value.split(" "),d=0;for(;d<c.length;d++){if(c[d]==b){break}}c.splice(d,1);document.forms.nudgeform.elements.userlist.value=c.join(" ");var c=document.forms.nudgeform.elements.userlist.value.split(" ");if(el("known").innerHTML!=""&&c.length<2&&(el("includelist").innerHTML==""||checked()==false)){$("#known").hide("slow");el("known").innerHTML=""}}function includelst(){if(el("includelist").innerHTML=="")el("includelist").innerHTML='<b>Include entire list</b><p><input type="checkbox" name="list" value="friend">Friend<input type="checkbox" name="list" value="col">Collegue<input type="checkbox" name="list" value="family">Family<input type="checkbox" name="list" value="Aqu">Acquaintance<input type="checkbox" name="list" value="no">No prior acquaintance</p><input type="button" style="position:relative;left:180px;font-size:.8em;" id="btn"  value="Include" onclick="hideincludelst()">';el("includelist").style.border="1px dotted black";$("#includelist").hide();$("#includelist").show("slow");$("#ieltext").hide("slow")}function hideincludelst(){$("#includelist").hide("slow");$("#ieltext").show("slow");if(checked()){if(el("known").innerHTML==""){el("known").innerHTML='</br><input  type="checkbox" name="known" value="yes">Let recepeints know who else you included';$("#known").hide();$("#known").show("slow")}}else{var a=document.forms.nudgeform.elements.userlist.value.split(" ");if(el("known").innerHTML!=""&&a.length<2){$("#known").hide("slow");el("known").innerHTML=""}}}function stopUpload1(a){if(a==1){el("success").innerHTML='<b>You have nudged successfully</b>   <spam id="okbutton" onclick="hidemsg()"><a href="#">OK</a></spam>';el("success").style.color="green";show("success")}else{el("success").style.color="red";el("success").innerHTML='<b>Failed to nudge </b>  <span id="okbutton" onclick="hidemsg()"><a href="javascript:void()">OK</a></span>';show("success")}hide("uploading");return true}function nudge(){$("#nudgemenu").hide("slow");var a=document.forms.nudgeform.elements.nudgetext.value,b=true;if(a){if(a.length>100){alert("Breached: Your msg size has exceeded 100 characters.\n"+"Only first 100 characters would be taken as your nudge text")}var c=[],d=0,e=document.forms.nudgeform.elements.list;if(e){for(var f=0;f<e.length;f++){if(e[f].checked==true){c[d]=e[f].value;d++}}}document.forms.nudgeform.elements.list1.value=c.join(" ");var g=document.forms.nudgeform.elements.nudgeclip.value,h=document.forms.nudgeform.elements.nudgepic.value;if(g.length>0&&validclip(g)==false){alert("Invalid clip type. \n"+"Please choose a sound file with .WAV extension.");document.forms.nudgeform.elements.nudgeclip.value="";$("#nudgemenu").show("slow");b=false;document.forms.nudgeform.elements.send.value="no"}if(h.length>0&&validpic(h)==false){alert("Invalid pic type. \n"+"Please choose an image file with .JPG or .GIF extension.");document.forms.nudgeform.elements.nudgepic.value="";$("#nudgemenu").show("slow");b=false;document.forms.nudgeform.elements.send.value="no"}if(b){document.forms.nudgeform.elements.send.value="yes";hide("body");el("uploading").innerHTML="<b>Please wait for a while.......</b>";show("uploading");el("reply_to_nudge").innerHTML=inner("temp_data");return true}}else{alert("You can't leave nudge textarea empty.\n"+"Please write something.");el("body").style.opacity=".2";$("#nudgemenu").show("slow");return false}}function show_colorlist(a){switch(a){case"nudgemenu_color":el("down_arrow").setAttribute("src","leftnew.png");el("change_nudgemenucolor").setAttribute("onclick","hide_colorlist('nudgemenu_color');");show("nudgemenu_color");$("#nudgemenu_color").hide();$("#nudgemenu_color").slideDown("slow");break;case"backstrip_color":el("down_arrow").setAttribute("src","up1.png");el("change_stripcolor").setAttribute("onclick","hide_colorlist('backstrip_color');");show("backstrip_color");$("#backstrip_color").hide();$("#backstrip_color").slideDown("slow");break}}function hide_colorlist(a){switch(a){case"nudgemenu_color":$("#nudgemenu_color").slideUp("slow");el("down_arrow").setAttribute("src","rightnew.png");el("change_nudgemenucolor").setAttribute("onclick","show_colorlist('nudgemenu_color');");break;case"backstrip_color":el("down_arrow").setAttribute("src","down.png");el("change_stripcolor").setAttribute("onclick","show_colorlist('backstrip_color');");$("#backstrip_color").slideUp("slow");break}}function update_value(a,b){switch(a){case"nudgemenu_color":$("#nudgemenu_color").hide("slow");el("down_arrow").setAttribute("src","rightnew.png");el("change_nudgemenucolor").setAttribute("onclick","show_colorlist('nudgemenu_color');");el(b).setAttribute("onmouseout","el('nudgemenu').style.background="+b+";");if(responsetext("entity="+a+"&value="+b,"modify.php")!=1)el("nudgemenu").style.background="<?php echo $nudgemenucolor ;?>";break;case"back_strip_color":$("#backstrip_color").hide("slow");el(b).setAttribute("onmouseout","el('layout').style.background="+b+";");el("layout").style.background=b;el("down_arrow").setAttribute("src","down.png");el("change_stripcolor").setAttribute("onclick","show_colorlist('backstrip_color')");if(responsetext("entity="+a+"&value="+b,"modify.php")!=1)el("layout").style.background="#eee";break}}function hidemsg(){hide("success");el("nudge_space").style.opacity="1";show("body")}function includeOthers(){$("#addmorebtn").hide("slow");el("addmoretext").innerHTML="<input type='text' style='border-bottom:1px solid black;background:grey;position:relative;' id='txt1' onkeyup='namehints(this.value)' name='name' autocomplete='off' maxlength='20' title='Type name here of another person you want to nudge'><div style='width:143px;position:relative;top:0px;border-bottom:1px solid black;border-left:1px solid black;border-right:1px solid black;background:grey;' id='txtHint' ></div>";$("#addmoretext").show("slow");hide("nudgelist")}function show_payAttention(){if(el("known").innerHTML!=""){el("beforeupload").style.top="-235px"}else{el("beforeupload").style.top="-180px"}show("beforeupload");$("#beforeupload").hide();$("#beforeupload").show("slow")}function hide_payAttention(){$("#beforeupload").hide("slow")}var fileref=document.createElement("link");fileref.setAttribute("rel","stylesheet");fileref.setAttribute("type","text/css");fileref.setAttribute("href","visit_styleSheet.css");document.getElementsByTagName("head")[0].appendChild(fileref);fileref.onload=shownudgemenu;fileref.onreadystatechange=function(){if(this.readyState=="complete")shownudgemenu()};show("nudgemenu")