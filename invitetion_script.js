var wait="<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please Wait.......</p>";function popMenu(){el("body").style.opacity=".2";el("menu").style.visibility="visible";$("#menu").hide();$("#menu").show("slow",function(){$(this).html(loading);w.postMessage("get_invite_content toid="+vuid+"&gen="+vu_gen);w.onmessage=function(a){$("#menu").html(a.data)}})}$(".fp_invite_btn1").live("click",function(){var b=$("#menu");var d=b.find("[name=fp_invite_type]:checked").val();var a=sex=b.find(".fp_hh").html();if(!d){apprise("Please specify how you know "+a);return}var e=b.attr("inp-id").split("_")[1];var c=b.find(".offer_point_field").val();hide_invite_pop_up();show("invitetionmsgText");el("invitetionmsgText").innerHTML=wait;hide("invite_btn");w.postMessage("send_invitetion toid="+e+"&type="+d+"&points="+c);w.onmessage=function(f){el("invite_btn").setAttribute("style","position:relative;left:-70px;top:-20px;");if(f.data=="success"){el("invitetionmsgText").innerHTML="<p>(You have invited "+sex+")</p>";el("invite_btn").value="Cancel invitation to "+sex;el("invite_btn").onclick=function(){cancelInvitetion(e,sex)};el("invite_btn").setAttribute("style","position:relative;background:red;");show("invite_btn");$("#rel").hide();$("#rel").show("slow")}else{el("invitetionmsgText").innerHTML="<p><font color='red'>Failed to invite "+sex+"</font></p>";el("invite_btn").value="Try to invite again";el("invite_btn").onclick=function(){submit1(id,sex)};show("invite_btn")}}});function hide_invite_pop_up(){$("#menu").hide("slow",function(){$(this).html("");$("#body").css("opacity","1")})}function submit1(f,e){show("invitetionmsgText");el("invitetionmsgText").innerHTML=wait;$("#menu").hide();hide("invite_btn");el("body").style.opacity="1";if(e=="female"){e="her"}else{e="him"}var d=document.forms.invitetiontype,b="",c=d.elements.request.value;for(var a=0;a<d.type.length;a++){if(d.type[a].checked){b=d.type[a].value}}w.postMessage("send_invitetion request="+vuid+"&type="+b);w.onmessage=function(g){el("invite_btn").setAttribute("style","position:relative;left:-90px;top:-20px;");if(g.data=="success"){el("invitetionmsgText").innerHTML="<p>(You have invited "+e+")</p>";el("invite_btn").value="Cancel invitation to "+e;el("invite_btn").onclick=function(){cancelInvitetion(f,e)};el("invite_btn").setAttribute("style","position:relative;left:-70px;top:-20px;background:red;");show("invite_btn");$("#rel").hide();$("#rel").show("slow")}else{el("invitetionmsgText").innerHTML="<p><font color='red'>Failed to invite "+e+"</font></p>";el("invite_btn").value="Try to invite again";el("invite_btn").onclick=function(){submit1(f,e)};show("invite_btn")}}}function cancelInvitetion(b,a){el("invitetionmsgText").innerHTML=wait;hide("invite_btn");if(a=="female"){a="her"}else{a="him"}w.postMessage("cancel_invitetion id="+b);w.onmessage=function(c){if(c.data=="success"){hide("invitetionmsgText");el("invite_btn").value="Invite "+a+"  home";el("invite_btn").setAttribute("style","position:relative;");$("#invite_btn").removeClass("redback");el("invite_btn").onclick=function(){popMenu()};show("invite_btn");$("#invite_btn").hide();$("#invite_btn").show("slow")}else{el("invitetionmsgText").innerHTML="<font color='red'>Failed to cancel invitation</font>";el("invite_btn").value="Try to cancel again";show("invite_btn")}}}function accept_reject(e,f,c,d){$("#aldlbuttonset").hide();el("invitetionmsgText").setAttribute("style","position:relative;left:-110px;");el("invitetionmsgText").innerHTML=wait;if(d=="female"){var b="She"}else{var b="He"}var a="requestid="+f+"&action="+e;if(c=="col"){c="Colleague"}if(c=="fam"){c="Family"}if(c=="no"){c="NPA"}if(c=="aqu"){c="Acquaintance"}switch(e){case"add":w.postMessage("accept_reject "+a);w.onmessage=function(g){if(g.data=="success"){el("invitetionmsgText").setAttribute("style","text-shadow: 5px 5px 5px green;position:relative;left:-120px;top:50px;");el("invitetionmsgText").innerHTML="<b style='color:green;'>"+b+"</b><span style='color:red;'> is in your </span><b style='color:green;'>"+c+" </b><span style='color:red;'>list</span></span>";$("#invitetionmsgText").hide();$("#invitetionmsgText").show("slow")}else{el("invitetionmsgText").innerHTML="<font color='red'>Failed to accept invitation</font>";$("#aldlbuttonset").show()}};break;case"reject":w.postMessage("accept_reject "+a);w.onmessage=function(g){if(g.data=="success"){el("invitetionmsgText").innerHTML="";el("invite_btn").setAttribute("style","position:relative;top:-10px;left:-10px;");show("invite_btn");$("#invite_btn").hide();$("#invite_btn").show("slow")}else{el("invitetionmsgText").innerHTML="<font color='red'>Failed to reject invitation</font>"}};break}};